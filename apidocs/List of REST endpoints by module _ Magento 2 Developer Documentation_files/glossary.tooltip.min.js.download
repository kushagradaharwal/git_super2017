if("undefined"==typeof magento)var magento={};magento.glossary={url:"https://magento.github.io/glossary/",terms:[],init:function(dataUrl,filter,callback){$.get(dataUrl,function(data){glossary=magento.glossary,glossaryData=$($.parseXML(data)),glossaryData.find("term").each(function(){return glossary.processTerm(filter,$(this))}),callback()},"text")},processTerm:function(filter,term){var glossary=magento.glossary,unserializedTerm=glossary.unserializeTerm(term);filter(unserializedTerm)&&glossary.terms.push(unserializedTerm)},unserializeTerm:function(termXmlData){var data={};return data.id=termXmlData.find("uuid").text(),data.title=termXmlData.find("title").text(),data.types=magento.glossary.unserializeList(termXmlData.find("types type")),data.forms=magento.glossary.unserializeFormTypes(termXmlData.find("form-types form")),data.synonyms=magento.glossary.unserializeList(termXmlData.find("synonyms synonym")),data.primarySource=termXmlData.find("primary-source").text().toLowerCase(),data.contentTagsArray=magento.glossary.unserializeList(termXmlData.find("content-tags content-tag")).map(function(value){return value.replace(/[\s\/]+/,"-")}),data.userTagsArray=magento.glossary.unserializeList(termXmlData.find("user-tags user-tag")),data.shortDefinition=termXmlData.find("short-definition").text().replace(/(?:\r\n|\r|\n)/g,"<br />"),data.longDefinition=termXmlData.find("long-definition").text().replace(/(?:\r\n|\r|\n)/g,"<br />"),data.usage=termXmlData.find("usage").text(),data.referenceLinks=magento.glossary.unserializeReferenceLinks(termXmlData.find("reference-links reference-link")),data},unserializeList:function(xmlList){for(var list=[],i=0;i<xmlList.length;i++)content=xmlList[i].textContent.toLowerCase(),content&&list.push(content);return list},unserializeFormTypes:function(forms){for(var formTypes=new Map,i=0;i<forms.length;i++){var types=$(forms[i]),text=types.attr("text").trim();text&&(formTypes.has(text)||formTypes.set(text,[]),formTypes.set(text,magento.glossary.unserializeList($("form-type",types))))}return formTypes},unserializeReferenceLinks:function(refLinks){for(var links=[],i=0;i<refLinks.length;i++){var link={location:$("location",refLinks[i])[0].textContent,text:$("text",refLinks[i])[0].textContent};links.push(link)}return links}},magento.glossary.tooltip={init:function(){$('[data-toggle="popover"]').each(function(){var term=magento.glossary.terms.find(magento.glossary.tooltip._findTerm,$(this).attr("term-uuid"));if(term){var title=term.title,glossaryLink='<p><a href="'+magento.glossary.url+"?#"+term.id+'" target="_blank">More Details</a></p>',content=term.shortDefinition+glossaryLink;$(this).webuiPopover({title:title,content:content,width:"400px",closeable:!0})}else console.error("Could not find term with id "+$(this).attr("term-uuid"))})},_findTerm:function(element){return element.id==this}};
